{% extends "base/base.html" %}

{% load staticfiles %}
{% load i18n %}

{% block title %}
{% trans "Het interventieonderzoek" %}
{% endblock %}

{% block progress %}{{ progress }}{% endblock %}

{% block content %}
<script>
$(function() {
    check_field_required('setting', 'needs_details', 'setting_details', 'core');
    check_field_required('setting', 'needs_supervision', 'supervision', 'core');
    depends_on_value('has_controls', 'True', 'has_controls_details');
    depends_on_value('has_recording', 'True', 'recording_same_experimenter');
    depends_on_value('recording_same_experimenter', 'False', 'recording_experimenter');
    
    add_title('setting', "{% trans 'Setting' %}");
    add_title('number', "{% trans 'Details interventie' %}");
    add_title('has_controls', "{% trans 'Controlegroep' %}");
    add_title('has_recording', "{% trans 'Voor- en nameting' %}");

    // Fixing display of the two fields on Study level
    $('label[for="id_has_observation"]').insertAfter($('#id_has_observation'));

    $('label[for="id_has_sessions"]').insertAfter($('#id_has_sessions'));
    $('#id_has_sessions').next().andSelf().insertAfter($('label[for="id_has_observation"]'));

    $('#id_has_observation').parents('tr').find('th').text("{% trans 'Maak je bij de voor- en/of nameting gebruik van:' %}");
    $('#id_has_observation').parents('tr').next().empty();

    $('label[for="id_has_observation"]').after('<br/>');

});
</script>
{% include "studies/study_title.html" %}
<form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
    <table>{{ form.as_table }}</table>
    {% with proposal=study.proposal %}
    {% include "base/form_buttons.html" %}
    {% endwith %}
</form>
{% endblock %}
