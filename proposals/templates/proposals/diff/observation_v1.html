{% load i18n %}
{% load get_field_name %}
{% load proposal_filters %}


<table class="proposals-diff pure-table pure-table-horizontal">
    <tr>
        <th class="proposals-diff-question"></th>
        <th class="proposals-diff-answer">{% trans "Originele studie" %}</th>
        <th class="proposals-diff-answer">{% trans "Revisie/amendement" %}</th>
    </tr>
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "setting" %}</th>
        <td>{{ p_observation.setting.all|unordered_list }}</td>
        <td>{{ observation.setting.all|unordered_list }}</td>
    </tr>
    {% if observation.setting.all|needs_details or p_observation.setting.all|needs_details %}
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "setting_details" %}</th>
        <td>{{ p_observation.setting_details }}</td>
        <td>{{ observation.setting_details }}</td>
    </tr>
    {% endif %}
    {% if study.has_children and observation.setting.all|needs_details:"needs_supervision" or p_study.has_children and p_observation.setting.all|needs_details:"needs_supervision" %}
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "supervision" %}</th>
        <td>{{ p_observation.supervision|yesno:_("ja,nee") }}</td>
        <td>{{ observation.supervision|yesno:_("ja,nee") }}</td>
    </tr>
    {% if not observation.supervision or not p_observation.supervision %}
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "leader_has_coc" %}</th>
        <td>{{ p_observation.leader_has_coc|yesno:_("ja,nee,") }}</td>
        <td>{{ observation.leader_has_coc|yesno:_("ja,nee,") }}</td>
    </tr>
    {% endif %}
    {% endif %}
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "days" %}</th>
        <td>{{ p_observation.days }}</td>
        <td>{{ observation.days }}</td>
    </tr>
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "mean_hours" %}</th>
        <td>{{ p_observation.mean_hours }}</td>
        <td>{{ observation.mean_hours }}</td>
    </tr>
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "is_anonymous" %}</th>
        <td>{{ p_observation.is_anonymous|yesno:_("ja,nee") }}</td>
        <td>{{ observation.is_anonymous|yesno:_("ja,nee") }}</td>
    </tr>
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "is_in_target_group" %}</th>
        <td>{{ p_observation.is_in_target_group|yesno:_("ja,nee") }}</td>
        <td>{{ observation.is_in_target_group|yesno:_("ja,nee") }}</td>
    </tr>
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "is_nonpublic_space" %}</th>
        <td>{{ p_observation.is_nonpublic_space|yesno:_("ja,nee") }}</td>
        <td>{{ observation.is_nonpublic_space|yesno:_("ja,nee") }}</td>
    </tr>
    {% if observation.is_nonpublic_space or p_observation.is_nonpublic_space %}
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "has_advanced_consent" %}</th>
        <td>{{ p_observation.has_advanced_consent|yesno:_("ja,nee") }}</td>
        <td>{{ observation.has_advanced_consent|yesno:_("ja,nee") }}</td>
    </tr>
    {% endif %}
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "needs_approval" %}</th>
        <td>{{ p_observation.needs_approval|yesno:_("ja,nee") }}</td>
        <td>{{ observation.needs_approval|yesno:_("ja,nee") }}</td>
    </tr>
    {% if observation.needs_approval or p_observation.is_nonpublic_space %}
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "approval_institution" %}</th>
        <td>{{ p_observation.approval_institution }}</td>
        <td>{{ observation.approval_institution }}</td>
    </tr>
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "approval_document" %}</th>
        <td><a href="{{ p_observation.approval_document.url }}" target="_blank">{% trans "Download" %}</a></td>
        <td><a href="{{ observation.approval_document.url }}" target="_blank">{% trans "Download" %}</a></td>
    </tr>
    {% endif %}
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "registrations" %}</th>
        <td>{{ p_observation.registrations.all|unordered_list }}</td>
        <td>{{ observation.registrations.all|unordered_list }}</td>
    </tr>
    {% if observation.registrations.all|needs_details or p_observation.registrations.all|needs_details %}
    <tr>
        <th>{% get_verbose_field_name "observations" "observation" "registrations_details" %}</th>
        <td>{{ p_observation.registrations_details }}</td>
        <td>{{ observation.registrations_details }}</td>
    </tr>
    {% endif %}
</table>