{% extends "base/base.html" %}

{% load staticfiles %}
{% load i18n %}

{% block title %} 
{% trans "Toetsing: ook door de METC?" %}
{% endblock %}

{% block progress %}5{% endblock %}

{% block content %}
<script>
$(function() {
    $("input[name=metc]").change(function() {
        var metc_undef = typeof $('input[name=metc]:checked').val() == "undefined";
        var metc_true = $('input[name=metc]:checked').val() == "True";
        var metc_doubt = metc_true || $('input[name=metc]:checked').val() == "None";

        $("input[name=metc_institution]").parent().parent().toggle(metc_doubt);
        if (metc_undef)
        {
            $("#id_is_medical, #id_is_behavioristic").parent().parent().hide();
        }
        else
        {
            $("#id_is_medical").parent().parent().toggle(!metc_true);
        }
    });
    $("input[name=metc]").change();

    depends_on_list_value('is_medical', ['True', 'None'], 'is_behavioristic');

    $("#id_metc, #id_is_medical, #id_is_behavioristic").change(function() {
        var metc = $('#id_metc_0:checked').val() == "True";
        var medical = $('#id_is_medical_0:checked').val() == "True";
        var behavioristic = $('#id_is_behavioristic_0:checked').val() == "True";

        $("#id_metc_application").parent().parent().toggle(metc || (medical && behavioristic));
    });
    $("#id_metc, #id_is_medical, #id_is_behavioristic").change();

    depends_on_value('metc_application', 'True', 'metc_decision');
    depends_on_value('metc_decision', 'True', 'metc_decision_pdf');
});
</script>
<form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
    <table>{{ form.as_table }}</table>
    {% with proposal=wmo.proposal %}
    {% include "proposals/form_buttons.html" %}
    {% endwith %}
</form>
{% endblock %}
