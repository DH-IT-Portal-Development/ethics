{% extends "proposals/base.html" %}
{% load staticfiles %}

{% block title %} 
Aanvraag indienen: fase 3
{% endblock %} 

{% block content %} 
{% include "proposals/form_styling.html" %}
<script>
function depends_on_value(a, a_value, b)
{
    $('input[name=' + a + ']').change(function() {
        var check = $('input[name=' + a + ']:checked').val() == a_value;
        $('#id_' + b).parent().parent().toggle(check);
    });
    $('input[name=' + a + ']').change();
}

$(function() {
    depends_on_value('has_traits', 'True', 'traits');
    depends_on_value('necessity', 'True', 'necessity_reason');

    $('input[name=traits]').change(function() {
        var traits = $('input[name=traits]:checked').map(function() {
            return this.value;
        }).get();
        // TODO: do this via AJAX request
        $("#id_traits_details").parent().parent().toggle(traits.indexOf("10") > 0);
    });
    $("input[name=traits]").change();
});
</script>
<h3>Algemene kenmerken van de studie</h3>
<form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
    <table>{{ form.as_table }}</table>
    <input class="pure-button pure-button-primary" type="submit" value="Doorgaan" />
</form>
{% endblock %}
